# Flutter Project: Code Generation & Architectural Guidelines

This document outlines the official guidelines and architectural rules for this project. All code, whether written manually or generated by a tool, must adhere to these standards to ensure consistency, scalability, and long-term maintainability.

---

## üèõÔ∏è Core Philosophy

Our primary goal is to build a robust and scalable application. This is achieved through three core principles:

1.  **Strict Separation of Concerns:** The architecture is non-negotiable. Each piece of code has a specific role and location.
2.  **Readability and Maintainability:** Code must be clear, concise, and easy for any developer to understand.
3.  **Performance and Scalability:** We build with the future in mind, ensuring the app can handle growth in features and user load.

---

## üèóÔ∏è The Architecture: Feature-First Layered Approach

We use a **Feature-First Layered Architecture**, inspired by Clean Architecture. The project is organized into feature modules (e.g., `media_feed`, `user_profile`), and each feature is divided into distinct layers.

**Dependency Rule:** Dependencies must always flow inwards. The UI depends on the application logic, which depends on the core domain, but the domain knows nothing about the outer layers.

> **Presentation Layer** ‚û°Ô∏è **Application Layer** ‚û°Ô∏è **Domain Layer** ‚¨ÖÔ∏è **Data Layer**



### Directory Structure

The following structure must be used for every feature:

---

## üé® UI Component Patterns & Common Mistakes

### Screen Headers in CustomScrollView

**‚ùå WRONG - Using SliverAppBar directly:**
```dart
CustomScrollView(
  slivers: [
    SliverAppBar(
      expandedHeight: 0,
      floating: false,
      pinned: true,
      backgroundColor: AppColors.background,
      title: Text('Screen Title'),
    ),
    // ... rest of content
  ],
)
```

**‚úÖ CORRECT - Use AppHeader wrapped in SliverToBoxAdapter:**
```dart
CustomScrollView(
  slivers: [
    SliverToBoxAdapter(
      child: AppHeader(
        title: 'Screen Title',
        backgroundColor: AppColors.background,
      ),
    ),
    // ... rest of content
  ],
)
```

**Why:** 
- `AppHeader` is the shared component used consistently across the app
- It includes proper SafeArea handling internally
- Maintains consistent styling and spacing
- Avoids custom SliverAppBar configurations that break design consistency

**Location:** `lib/src/shared/presentation/components/navigation/app_header.dart`

---

### Stats Cards - Always Use Shared Component

**‚ùå WRONG - Creating custom stats card with different styling:**
```dart
Container(
  decoration: BoxDecoration(
    color: AppColors.primary, // Wrong - purple background
    borderRadius: BorderRadius.circular(20),
  ),
  child: Row(
    children: [
      // Custom stat items with white text
    ],
  ),
)
```

**‚úÖ CORRECT - Use shared StatsCard component:**
```dart
import '../../../../shared/presentation/components/cards/stats_card.dart';

StatsCard(
  stats: [
    StatCardItem(
      icon: Icons.local_fire_department,
      value: dayStreak,
      label: 'Day Streak',
      iconColor: const Color(0xFFFF9800),
    ),
    StatCardItem(
      icon: Icons.timer_outlined,
      value: '${totalHours}h',
      label: 'Hours Spent',
      iconColor: const Color(0xFF00BCD4),
    ),
    StatCardItem(
      icon: Icons.check_circle_outline,
      value: completedCount,
      label: 'Completed',
      iconColor: AppColors.success,
    ),
  ],
)
```

**Why:**
- Consistent white/light background (`AppColors.surface`)
- Standard circular icon containers with colored backgrounds
- Consistent shadow styling matching home screen
- Large, bold numbers (32px font) for readability
- Maintains design system consistency

**Location:** `lib/src/shared/presentation/components/cards/stats_card.dart`

---

### Common Structural Mistakes

**‚ùå WRONG - Extra closing parentheses in Scaffold:**
```dart
return Scaffold(
  body: CustomScrollView(
    slivers: [
      // content
    ],
  ),
), // Extra closing paren - causes syntax error
);
```

**‚úÖ CORRECT - Proper nesting:**
```dart
return Scaffold(
  body: CustomScrollView(
    slivers: [
      // content
    ],
  ),
); // Only one closing paren for Scaffold
```

**Why:** 
- Flutter's widget tree must have balanced parentheses
- Each widget constructor needs exactly one closing parenthesis
- Extra parentheses cause "Expected to find ';'" errors

---

### Checklist Before Creating New UI Components

Before creating any new UI component, verify:

1. ‚úÖ Does a shared component already exist in `lib/src/shared/presentation/components/`?
2. ‚úÖ Have you checked `docs/component_usage_guide.md` for existing patterns?
3. ‚úÖ Are you using `AppColors` and `AppGradients` (no hardcoded colors)?
4. ‚úÖ Does the component match the design system used in other screens?
5. ‚úÖ For stats/metrics displays, are you using `StatsCard`?
6. ‚úÖ For screen headers, are you using `AppHeader` or `GradientHeader`?

**If any answer is NO, review existing components first before creating new ones.**
